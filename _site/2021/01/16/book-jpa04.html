<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>자바 ORM표준 JPA 프로그래밍 - 엔티티 매핑 | Steady / Focus / Life</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="자바 ORM표준 JPA 프로그래밍 - 엔티티 매핑" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="객체와 테이블 매핑 어노테이션" />
<meta property="og:description" content="객체와 테이블 매핑 어노테이션" />
<link rel="canonical" href="http://localhost:4000/2021/01/16/book-jpa04" />
<meta property="og:url" content="http://localhost:4000/2021/01/16/book-jpa04" />
<meta property="og:site_name" content="Steady / Focus / Life" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-16T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="자바 ORM표준 JPA 프로그래밍 - 엔티티 매핑" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"자바 ORM표준 JPA 프로그래밍 - 엔티티 매핑","dateModified":"2021-01-16T00:00:00+09:00","datePublished":"2021-01-16T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/01/16/book-jpa04"},"url":"http://localhost:4000/2021/01/16/book-jpa04","description":"객체와 테이블 매핑 어노테이션","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<meta name="keywords" content="book,JPA" />

<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" href="/favicon.ico"/>
<link rel="alternate" type="application/rss+xml" title="Steady / Focus / Life - Write an awesome description for your new site here." href="/feed.xml" />
<link rel="stylesheet" type="text/css" href="/assets/css/base.css" />
<link rel="stylesheet" type="text/css" href="/assets/css/highlight.css" />

<!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->


<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async ></script>


<script src="/assets/script/jekyllpaper.js" async ></script>
<script src="https://unpkg.com/mermaid@8.5.1/dist/mermaid.min.js" onload="javascript:loadMermaid();" async></script>


</head>
<body>
  <div class="container-wrapper">
    <header class="container-header">
      <div class="header-info">
  <span class="header-info-name">Steady / Focus / Life</span>
  <span class="header-info-desc">Write an awesome description for your new site here.</span>
</div>
<nav class="header-nav">
  <ul class="header-main-nav">
  
    <li class="header-main-nav-item"><a href="/">Index</a></li>
  
    <li class="header-main-nav-item"><a href="/category">Categories</a></li>
  
    <li class="header-main-nav-item"><a href="/about">About</a></li>
  
  </ul>
</nav>
    </header>
    <main class="container-main">
      <article class="container-post">
  <div class="post-title">
    <h1>자바 ORM표준 JPA 프로그래밍 - 엔티티 매핑</h1>
  </div>
  <div class="post-author">
    <span>JinKim</span>
  </div>
  <div class="post-content">
    <p>객체와 테이블 매핑 어노테이션</p>

<p><strong>@Entity</strong></p>

<p>테이블과 매핑할 클래스는 어노테이션 필수</p>
<ul>
  <li>기본 생성자는필수</li>
  <li>final 클래스, enum, interface, inner 클래스에는 사용할 수 없다.</li>
  <li>저장할 필드에 final을 사용하면 안 된다.</li>
</ul>

<p><strong>@Table</strong></p>

<p>엔티티와 매핑할 테이블을 지정</p>

<p>속성</p>

<table>
  <tbody>
    <tr>
      <td>name</td>
      <td>매핑할 테이블 이름</td>
    </tr>
    <tr>
      <td>catalog</td>
      <td>catalog 기능이 있는 데이터베이스에서 catalog 매핑</td>
    </tr>
    <tr>
      <td>schema</td>
      <td>schema 기능이 있는 데이터베이스에서 schema 매핑</td>
    </tr>
    <tr>
      <td>uniqueConstraints</td>
      <td>DDL 생성 시에 유니크 제약조건을 만든다.</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>[HBM2DDL] - 데이터베이스 스키마 자동 생성</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">”hibernate.hhm2ddl.auto”</span> <span class="na">value=</span><span class="s">”create”</span> <span class="nt">/&gt;</span>
애플리케이션 실행 시점에 테이블을 자동으로 생성
<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">”hibernate.show_sql”</span> <span class="na">value=</span><span class="s">”true”</span> <span class="nt">/&gt;</span>
테이블 생성 DDL을 콘솔 출력
</code></pre></div></div>

<p>속성</p>

<table>
  <tbody>
    <tr>
      <td>create</td>
      <td>기존 테이블을 삭제하고 새로 생성. DROP + CREATE</td>
    </tr>
    <tr>
      <td>create-drop</td>
      <td>create 속성에 추가로 애플리케이션을 종료할 때 생성한 DDL을 제거한다. DROP + CREATE + DROP</td>
    </tr>
    <tr>
      <td>update</td>
      <td>데이터베이스 테이블과 엔티티 매핑정보를 비교해서 변경 사항만 수정</td>
    </tr>
    <tr>
      <td>validate</td>
      <td>데이터베이스 테이블과 엔티티 매핑정보를 비교해서 차이가 있으면 경고를 남기고 애플리케이션을 실행하지 않는다. 이 설정은 DDL을 수정하지 않는다.</td>
    </tr>
    <tr>
      <td>none</td>
      <td>자동 생성 기능을 사용하지 않으려면 hibernate.hbm2d이.auto 속성 자체를 삭제하거나 유효하지 않은 옵션 값을 주면 된다.</td>
    </tr>
  </tbody>
</table>

<p>HBM2DDL 주의사항</p>
<ul>
  <li>개발 초기 단계는 create 또는 update</li>
  <li>초기화 상태로 자동화된 테스트를 진행하는 개발자 환경과 CI 서버는 create 또는 create-drop</li>
  <li>테스트 서버는 update 또는 validate</li>
  <li>스테이징과 운영 서버는 validate 또는 none</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">”hibernate.ejb.naming_strategy”</span> <span class="na">value=</span><span class="s">”org.hibernate.cfg.ImprovedNamingStrategy”</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!--자바의 카멜 표기법을 테이블의 언더스코어 표기법으로 매핑--&gt;</span>
</code></pre></div></div>
<p><br /></p>

<p>기본 키 매핑</p>
<ul>
  <li>직접 할당</li>
  <li>자동 생성: 대리 키 사용 방식
    <ul>
      <li>IDENTITY : 기본 키 생성을 데이터베이스에 위임 (주로 MySQL, PostgreSQL, SQL Server, DB2)</li>
      <li>SEQUENCE : 데이터베이스 시퀀스를 사용해서 기본 키를 할당 (주로 오라클, PostgreSQL, DB2, H2)</li>
      <li>TABLE : 키 생성 테이블을 사용</li>
      <li>AUTO : 데이터베이스 방언에 따라 IDENTITY, SEQUENCE, TABLE 전략 중 하나를 자동으로 선택) @GeneratedValue(strategy = GenerationType.AUTO)</li>
    </ul>
  </li>
</ul>

<p><br /></p>

<p>필드와 컬럼 매핑</p>

<p><strong>@Column</strong></p>

<p>객체 필드를 테이블 컬럼에 매핑 속성</p>

<table>
  <tbody>
    <tr>
      <td>name</td>
      <td>필드와 매핑할 테이블의 컬럼 이름</td>
    </tr>
    <tr>
      <td>insertable</td>
      <td>기본값 true, 엔티티 저장 시 필드로 같이 저장</td>
    </tr>
    <tr>
      <td>updatable</td>
      <td>기본값 true, 엔티티 수정 시 필드도 같이 수정</td>
    </tr>
    <tr>
      <td>table</td>
      <td>하나의 엔티티를 두 개 이상의 데이틀에 매핑할 때 사용</td>
    </tr>
    <tr>
      <td>nullable(DDL)</td>
      <td>null 값의 허용 여부를 설정</td>
    </tr>
    <tr>
      <td>unique(DDL)</td>
      <td>@Table의 uniqueContraints와 같지만 한 컬럼에 간단히 유니크 제약조건을 걸 때 사용</td>
    </tr>
    <tr>
      <td>columnDefinition(DDL)</td>
      <td>데이터베이스 컬럼 정보를 직접 줄 수 있다.</td>
    </tr>
    <tr>
      <td>length(DDL)</td>
      <td>문자 길이 제약조건, String 타입에만 사용</td>
    </tr>
    <tr>
      <td>precision, scale(DDL)</td>
      <td>BigDecimal 타입에서 사용한다(BigInteger도 사용). Precision은 소수점을 포함한 전체 자릿수를, scale은 소수의 자릿수.</td>
    </tr>
  </tbody>
</table>

<p><strong>@Enumerated</strong> 
자바의 enum 타입을 매핑할 때 사용한다.</p>

<p><strong>@Temporal</strong>
날짜 타입을 매핑할 때 사용 
TemporalType.DATE : 날짜, 데이터베이스 date 타입과 매핑(예: 2013-10-11)
TemporalType.TIME : 시간, 데이터베이스 time 타입과 매핑(예: 11:11:11)
TemporalType.TIMESTAMP : 날짜와 시간, 데이터베이스 timestamp 타입과 매핑(예: 2013-10-11 11:11:11)</p>

<p><strong>@Lob</strong>
데이터베이스 BLOB, CLOB 타입과 매핑</p>

<p><strong>@Transient</strong>
이 필드는 매핑하지 않는다. 객체에 임시로 값을 보관하고 싶을 때 사용</p>

<p><strong>@Access</strong>
필드 접근: AccessType.FIELD로 지정. 필드에 직접 접근
프로퍼티 접근 : AccessType.PROPERTY로 지정. 접근자Getter</p>

<p><br /></p>

<p>출처 : 자바 ORM 표준 JPA 프로그래밍 김영한 지음</p>

<p><br /></p>

  </div>
  <div class="post-info">
    <div class="post-date">
      Written on 2021-01-16, updated at 2021-01-16.
    </div>
    <div class="post-categories">
      <span>Categories: </span>
      
      <a href="/category/book" class="post-category">book</a>
      
      <a href="/category/jpa" class="post-category">JPA</a>
      
    </div>
    <div class="post-tags">
      <span>Tags: </span>
      
      <a href="/tag/book" class="post-tag">book</a>
      
      <a href="/tag/jpa" class="post-tag">JPA</a>
      
    </div>
    <div class="post-tools">
      
      <div>
        <span>Next: </span><a href="/2021/01/17/book-jpa05">자바 ORM표준 JPA 프로그래밍 - 연관관계 매핑 기초</a>
      </div>
      
      
      <div>
        <span>Previous: </span><a href="/2021/01/15/book-jpa03">자바 ORM표준 JPA 프로그래밍 - 영속성관리</a>
      </div>
      
    </div>
    
      
  <div id="disqus_thread"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://shapeofcodeblog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    
  </div>
</article>
    </main>
    <footer class="container-footer">
      <div class="footer-copyright">
  <span class="footer-copyright-text float-left">Copyright &copy; 2021. shapeofcode.github.io.</span>
  <span class="footer-copyright-text float-right">
    Powered by <a href="https://jekyllrb.com/">Jekyll</a>, themed by <a href="https://github.com/ghosind/Jekyll-Paper">Jekyll-Paper</a>.
  </span>
</div>
    </footer>
  </div>
</body>
</html>